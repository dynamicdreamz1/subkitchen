<section class="product">
  <div class="row">
    <div class="small-12 medium-6 columns">
      <img class="main" src="{{model.product_image}}" alt="">
    </div>
    <div class="small-12 medium-6 columns">
      <div class="row collapse">
        <div class="small-11 columns ellipsis">
          <h4> {{model.name}} </h4>
        </div>
        <div class="small-1 columns text-center likes" onclick={{action 'toggleLike'}}>
          <div class="icon">
            {{#if model.likes_count}}
            <span class="icon-sub-liked">
              <span class="path1"></span><span class="path2"></span>
            </span>
            {{else}}
            <span class="icon-sub-unliked">
              <span class="path1"></span><span class="path2"></span>
            </span>
            {{/if}}
          </div>
          {{model.likes_count}}
        </div>
      </div>
      <div class="row">
        <div class="small-12 columns">
          <h4 class="price"> {{format-number model.price style="currency" currency="USD"}} </h4>
        </div>
      </div>
      <div class="row">
        <div class="small-12 columns sizes">
          SIZE:
          <form>
            <ul class="center">
              {{#each sizes as |s|}}
              <li>{{radio-button value=s model_id=model.id text=s execute=setSize chosen=size}}</li>
              {{/each}}
            </ul>
          </form>
        </div>
      </div>
      <div class="row">
        <div class="small-12 columns">
          QUANTITY:
          <div class="input-group quantity">
            <a class="input-group-label minus" onclick={{action "decreaseQuantity"}}>&#8211;</a>
            {{input class="input-group-field center" type="number" value=quantity}}
            <a class="input-group-label plus" onclick={{action "increaseQuantity"}}>+</a>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="small-12 medium-6 columns">
          <a class="button" onclick={{action "addToCart"}} class="blue button addToCart uppercase">ADD TO CART</a>
        </div>
      </div>

      <div class="row">
        <div class="small-12 columns">
          <ul class="tabs" data-tabs id="example-tabs">
            <li class="tabs-title is-active"><a href="#panel1" aria-selected="true">DESCRIPTION</a></li>
            <li class="tabs-title"><a href="#panel2">SIZE CHART</a></li>
            <li class="tabs-title"><a href="#panel3">SHIPPING</a></li>
          </ul>
          <div class="tabs-content" data-tabs-content="example-tabs">
            <div class="tabs-panel is-active" id="panel1">
              <p> {{{model.description}}} </p>
            </div>
            <div class="tabs-panel" id="panel2">
              <p>Suspendisse dictum feugiat nisl ut dapibus.  Vivamus hendrerit arcu sed erat molestie vehicula. Ut in nulla enim. Phasellus molestie magna non est bibendum non venenatis nisl tempor.  Sed auctor neque eu tellus rhoncus ut eleifend nibh porttitor.</p>
            </div>
            <div class="tabs-panel" id="panel3">
              <p> {{{model.shipping}}} </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="small-12 columns product-supporters">
      <ul class="tabs" data-tabs id="product-supporters">
        <li class="tabs-title is-active"><a href="#comments" aria-selected="true" {{action 'none'}}>COMMENTS (<span class="count">{{model.comments_count}}</span>)</a></li>
        <li class="tabs-title"><a href="#promoters" {{action 'none'}}>PROMOTERS (<span class="count">{{model.likes_count}}</span>)</a></li>
      </ul>
      <div class="tabs-content" data-tabs-content="product-supporters">
        <div class="tabs-panel is-active comments" id="comments">
          {{#each comments as |comment|}}
          <div class="row comment">
            <div class="small-2 columns">
              {{#if comment.user.image_url}}
              <img src="{{comment.user.image_url}}" alt="{{comment.user.name}}">
              {{else}}
              <img src="assets/images/default-2.png" alt="{{comment.user.name}}">
              {{/if}}
            </div>
            <div class="small-10 columns comment-content">
              <div class="row">
                <div class="small-12 columns info">
                  <span class="username">{{comment.user.name}}</span> commented on {{format-date comment.createdAt  hour='numeric' minute='numeric' hour12=true month='long' day='numeric' year ='numeric'}}
                </div>
              </div>
              <div class="row">
                <div class="small-12 columns">
                  {{comment.content}}
                </div>
              </div>
            </div>
          </div>
          {{/each}}

          {{#if (gt comments.meta.total_pages comments.meta.current_page)}}
          <div class="row">
            <div class="small-12 columns text-center">
              <button class="button uppercase" onclick={{action 'loadMoreComments'}}>load more</button>
            </div>
          </div>
          {{/if}}

        </div>

        <div class="tabs-panel" id="promoters">
          <div class="row small-up-1 medium-up-2 large-up-4">
            {{#each model.promoters as |promoter|}}
            <div class="column promoter">
              <div class="row collapse">
                <div class="small-4 columns">
                  {{#if promoter.image_url}}
                  <img src="{{promoter.image_url}}" alt="">
                  {{else}}
                  <img src="assets/images/default.png" alt="">
                  {{/if}}
                </div>
                <div class="small-8 columns promoter-details">
                  <div class="row">
                    <div class="small-12 columns">
                      {{promoter.name}}
                    </div>
                  </div>
                  <div class="row">
                    <div class="small-12 columns followers-count">
                      {{promoter.followers_count}} FOLLOWERS
                    </div>
                  </div>
                  {{#if promoter.artist}}
                  <div class="row">
                    <div class="small-12 columns">
                      <span class="cook">COOK</span>
                    </div>
                  </div>
                  {{/if}}
                </div>
              </div>
            </div>
            {{/each}}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
